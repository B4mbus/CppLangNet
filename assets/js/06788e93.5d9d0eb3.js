"use strict";(self.webpackChunkcpp_lang_net=self.webpackChunkcpp_lang_net||[]).push([[23501],{55684:(e,t,n)=>{n.d(t,{ZP:()=>s});var a=n(87462),r=(n(67294),n(3905));const o={toc:[]};function s(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},o,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cpp"},'// prism-push-types:Car\n#include <iostream>\n\nstruct Car\n{\n    // car information\n    std::string brand;\n    std::string model;\n    int         yearOfProduction;\n\n    // movement\n    float       topSpeed = 200;     // (km/h)\n    float       acceleration = 50;  // (km/h per second)\n    float       speed = 0;          // current one (km/h)\n};\n\nvoid accelerate(Car& car)\n{\n    car.speed += car.acceleration;\n}\n\nint main()\n{\n\n    Car car;\n    car.brand = "Ford";\n    car.model = "Mustang";\n    car.yearOfProduction = 1969;\n    car.topSpeed = 250;\n    car.acceleration = 60;\n    // initial values...\n\n    // calling for the first time\n    accelerate(car);\n    std::cout << "Current speed: " << car.speed << " km/h\\n";\n    \n    // calling for the second time\n    accelerate(car);\n    std::cout << "Current speed: " << car.speed << " km/h\\n";\n}\n')))}s.isMDXComponent=!0},93572:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>c,toc:()=>p});var a=n(87462),r=n(67294),o=n(3905),s=(n(22307),n(61667),n(18510));n(74866),n(85162),n(56693),n(42677),n(55684);const l={title:"Special methods",description:"Lesson: special methods basics in C++",tags:["method","constructor","destructor","structure","struct","class","object-oriented","oop"],hide_title:!0},i=void 0,c={unversionedId:"course/basics/methods/special-methods",id:"course/basics/methods/special-methods",title:"Special methods",description:"Lesson: special methods basics in C++",source:"@site/content/learn/course/basics/methods/special-methods.mdx",sourceDirName:"course/basics/methods",slug:"/course/basics/methods/special-methods",permalink:"/CppLangNet/learn/course/basics/methods/special-methods",draft:!1,editUrl:"https://github.com/Cpp4You/CppLangNet/edit/main/content/learn/course/basics/methods/special-methods.mdx",tags:[{label:"method",permalink:"/CppLangNet/learn/tags/method"},{label:"constructor",permalink:"/CppLangNet/learn/tags/constructor"},{label:"destructor",permalink:"/CppLangNet/learn/tags/destructor"},{label:"structure",permalink:"/CppLangNet/learn/tags/structure"},{label:"struct",permalink:"/CppLangNet/learn/tags/struct"},{label:"class",permalink:"/CppLangNet/learn/tags/class"},{label:"object-oriented",permalink:"/CppLangNet/learn/tags/object-oriented"},{label:"oop",permalink:"/CppLangNet/learn/tags/oop"}],version:"current",frontMatter:{title:"Special methods",description:"Lesson: special methods basics in C++",tags:["method","constructor","destructor","structure","struct","class","object-oriented","oop"],hide_title:!0},sidebar:"defaultSidebar",previous:{title:"Methods",permalink:"/CppLangNet/learn/course/basics/methods/"},next:{title:"Polymorphism",permalink:"/CppLangNet/learn/course/basics/polymorphism"}},u={},p=[{value:"Constructors",id:"constructors",level:2},{value:"Default constructor",id:"default-constructor",level:3},{value:"Parameterized constructor",id:"parameterized-constructor",level:3},{value:"A deleted default constructor",id:"a-deleted-default-constructor",level:4},{value:"Copy constructor",id:"copy-constructor",level:4},{value:"Member initializer list",id:"member-initializer-list",level:3},{value:"Destructors",id:"destructors",level:2}],d={toc:p};function m(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"special-methods"},"Special methods"),(0,o.kt)("p",null,"There are two kinds of methods with a special meaning in C++: ",(0,o.kt)("strong",{parentName:"p"},"constructors")," and ",(0,o.kt)("strong",{parentName:"p"},"destructors"),"."),(0,o.kt)("h2",{id:"constructors"},"Constructors"),(0,o.kt)("admonition",{title:"Definition",type:"important"},(0,o.kt)("p",{parentName:"admonition"},"A constructor is a special method that is called when an object is created - it begins the lifetime of an object.")),(0,o.kt)("p",null,"One of the main reasons for using constructors is to set up the data members of an object based on external parameters.\nFor example, when creating a ",(0,o.kt)("inlineCode",{parentName:"p"},"Player")," object, a constructor can be used to enforce that the health value passed to the constructor\nis between ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," and the ",(0,o.kt)("inlineCode",{parentName:"p"},"maxHealth")," value. The constructor can be defined as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp"},"struct Player\n{\n    int maxHealth;\n    int health;\n\n    Player(int maxHp, int hp)\n    {\n        maxHealth = maxHp;\n        health = std::max(std::min(hp, maxHealth), 0);\n    }\n};\n")),(0,o.kt)("p",null,"This constructor uses the ",(0,o.kt)("inlineCode",{parentName:"p"},"max")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"min")," functions to ensure that ",(0,o.kt)("inlineCode",{parentName:"p"},"health")," is between ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"maxHealth"),".\nThis way, even if user try to pass ",(0,o.kt)("inlineCode",{parentName:"p"},"hp")," more than ",(0,o.kt)("inlineCode",{parentName:"p"},"maxHealth")," it will automatically be clamped to ",(0,o.kt)("inlineCode",{parentName:"p"},"maxHealth"),"."),(0,o.kt)("admonition",{title:"Defining a constructor",type:"important"},(0,o.kt)("p",{parentName:"admonition"},"Constructors are defined by creating a function with the same name as the class, and without a return type (not even ",(0,o.kt)("inlineCode",{parentName:"p"},"void"),").")),(0,o.kt)("p",null,"It is possible to define multiple constructors for a class or struct in C++, each with their own unique signature and behavior.\nThese constructors can take different forms such as:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"default constructors"),(0,o.kt)("li",{parentName:"ul"},"copy constructors"),(0,o.kt)("li",{parentName:"ul"},"move constructors")),(0,o.kt)("p",null,"and more, which will be covered later in the course. Object construction in C++ is a vast topic and there are many advanced features and techniques.\nIn this lesson, we will only cover the basics of constructors and how they can be used to control the initialization of objects."),(0,o.kt)("p",null,"Depending on the context and how an object is constructed, a specific constructor will be called. This allows for greater\nflexibility and control over the initialization of objects."),(0,o.kt)("p",null,"For now, let's start with the simplest form of a constructor."),(0,o.kt)("h3",{id:"default-constructor"},"Default constructor"),(0,o.kt)("p",null,"A default constructor in C++ is a constructor that can be called without any arguments. It is ",(0,o.kt)(s.Z,{title:(0,o.kt)(r.Fragment,null,"There are exceptions to this rule. There are situations where compiler cannot automatically generate it, but we will explain them later."),mdxType:"Tooltip"},"automatically provided","*")," by the compiler when no other constructors are defined, but it can also be explicitly defined."),(0,o.kt)("p",null,"For example, the following ",(0,o.kt)("inlineCode",{parentName:"p"},"Person")," struct has a default constructor:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp",metastring:'title="Defining a default constructor"',title:'"Defining',a:!0,default:!0,'constructor"':!0},'struct Person {\n    std::string name;\n    int age;\n\n    // Default settings\n    Person() {\n        name = "John Doe";\n        age = 18;\n    }\n};\n')),(0,o.kt)("p",null,"It can also be only declared within the struct body and then defined outside of it, like regular methods. For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp",metastring:'title="Defining a constructor outside of the struct"',title:'"Defining',a:!0,constructor:!0,outside:!0,of:!0,the:!0,'struct"':!0},'struct Person {\n    std::string name;\n    int age;\n\n    Person(); // declaration only\n};\n\n// definition\nPerson::Person() {\n    name = "John Doe";\n    age = 18;\n}\n')),(0,o.kt)("p",null,"Note that the data members in the previous example of `Person`` struct could have been easily initialized ",(0,o.kt)("strong",{parentName:"p"},"without")," manually\nwriting a constructor. In earlier lessons, we have seen that we can use an assignment operator in the place of a data member declaration,\nas a shorthand notation:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp",metastring:'title="Shorthand notation for data member initialization"',title:'"Shorthand',notation:!0,for:!0,data:!0,member:!0,'initialization"':!0},'struct Person {\n    std::string name = "John Doe";\n    int age = 18;\n};\n')),(0,o.kt)("p",null,"This is because in this case the compiler automatically generates a proper constructor for us, but in this lesson we wanted to demonstrate\nthat we can write it manually and possibly add an additional logic to it, just like in the example at the very beginning.\nThe ability to write a custom default constructor (or constructors in general) gives us more control over how objects are constructed and initialized,\nand can help ensure that objects are created in a valid state."),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"As a general rule of thumb, you should ",(0,o.kt)("strong",{parentName:"p"},"only")," write a constructor if you need to add some additional logic to it,\nor if you want to enforce some constraints on the data members of an object. See ",(0,o.kt)("a",{parentName:"p",href:"#examples"},"examples")," to get a better idea of when to use them.")),(0,o.kt)("h3",{id:"parameterized-constructor"},"Parameterized constructor"),(0,o.kt)("p",null,"A parametrized constructor is one that accepts one or more arguments. This allows for greater flexibility in the initialization of objects.\nWe used it in the example at the ",(0,o.kt)("a",{parentName:"p",href:"#constructors"},"beginning of this lesson")," to enforce that the ",(0,o.kt)("inlineCode",{parentName:"p"},"health")," value passed to the constructor\nis between ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," and the ",(0,o.kt)("inlineCode",{parentName:"p"},"maxHealth")," value."),(0,o.kt)("p",null,"To instantiate an object using a parametrized constructor, we need to pass the required arguments to the constructor, like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp"},"// prism-push-types:Player\nPlayer player(100, 50); // maxHealth = 100, health = 50\n")),(0,o.kt)("h4",{id:"a-deleted-default-constructor"},"A deleted default constructor"),(0,o.kt)("p",null,"If we only provide a single, parametrized constructor, the ",(0,o.kt)("strong",{parentName:"p"},"compiler will delete")," the default one.\nThis is the case for our previous code. Trying to create a ",(0,o.kt)("inlineCode",{parentName:"p"},"Player")," object without passing any arguments will result in a compiler error:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp",metastring:'title="Trying to use a deleted default constructor"',title:'"Trying',to:!0,use:!0,a:!0,deleted:!0,default:!0,'constructor"':!0},"// error-next-line\n// prism-push-types:Player\nPlayer player; // error: no matching function for call to 'Player::Player()'\n")),(0,o.kt)("p",null,"To restore the default constructor, we can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"default")," keyword like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp"},"struct Player {\n    // <data members>\n\n    Player(int maxHp, int hp) {\n        // ...\n    }\n\n    Player() = default; // enforce compiler to create a default constructor\n};\n")),(0,o.kt)("h4",{id:"copy-constructor"},"Copy constructor"),(0,o.kt)("admonition",{title:"Invalid copy constructor",type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"Declaring a constructor with a single parameter of the same type as the structure is not allowed:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-cpp"},"// error-next-line\n// prism-push-types:Person\nPerson(Person other) { // error\n    // ...\n}\n"))),(0,o.kt)("h3",{id:"member-initializer-list"},"Member initializer list"),(0,o.kt)("h2",{id:"destructors"},"Destructors"))}m.isMDXComponent=!0},42677:(e,t,n)=>{n.d(t,{ZP:()=>s});var a=n(87462),r=(n(67294),n(3905));const o={toc:[]};function s(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},o,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"important"},(0,r.kt)("p",{parentName:"admonition"},"This section requires improvement. You can help by editing this doc page.")))}s.isMDXComponent=!0},56693:(e,t,n)=>{n.d(t,{ZP:()=>s});var a=n(87462),r=(n(67294),n(3905));const o={toc:[]};function s(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},o,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Note, this article is not finished! You can help by editing this doc page.")))}s.isMDXComponent=!0},34673:(e,t,n)=>{n.d(t,{Z:()=>f});var a=n(87462),r=n(67294),o=n(86010),s=n(72389),l=n(86043);const i="details_lb9f",c="isBrowser_bmU9",u="collapsibleContent_i85q";function p(e){return!!e&&("SUMMARY"===e.tagName||p(e.parentElement))}function d(e,t){return!!e&&(e===t||d(e.parentElement,t))}function m(e){let{summary:t,children:n,...m}=e;const h=(0,s.Z)(),f=(0,r.useRef)(null),{collapsed:g,setCollapsed:b}=(0,l.u)({initialState:!m.open}),[k,y]=(0,r.useState)(m.open),v=r.isValidElement(t)?t:r.createElement("summary",null,t??"Details");return r.createElement("details",(0,a.Z)({},m,{ref:f,open:k,"data-collapsed":g,className:(0,o.Z)(i,h&&c,m.className),onMouseDown:e=>{p(e.target)&&e.detail>1&&e.preventDefault()},onClick:e=>{e.stopPropagation();const t=e.target;p(t)&&d(t,f.current)&&(e.preventDefault(),g?(b(!1),y(!0)):b(!0))}}),v,r.createElement(l.z,{lazy:!1,collapsed:g,disableSSRStyle:!0,onCollapseTransitionEnd:e=>{b(e),y(!e)}},r.createElement("div",{className:u},n)))}const h="details_b_Ee";function f(e){let{...t}=e;return r.createElement(m,(0,a.Z)({},t,{className:(0,o.Z)("alert alert--info",h,t.className)}))}},85162:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(67294),r=n(86010);const o="tabItem_Ymn6";function s(e){let{children:t,hidden:n,className:s}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,s),hidden:n},t)}},74866:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(87462),r=n(67294),o=n(86010),s=n(12466),l=n(76775),i=n(91980),c=n(67392),u=n(50012);function p(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function d(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??p(n);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const a=(0,l.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,i._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=d(e),[s,l]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[i,c]=h({queryString:n,groupId:a}),[p,f]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,u.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),g=(()=>{const e=i??p;return m({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{g&&l(g)}),[g]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),c(e),f(e)}),[c,f,o]),tabValues:o}}var g=n(72389);const b="tabList__CuJ",k="tabItem_LNqP";function y(e){let{className:t,block:n,selectedValue:l,selectValue:i,tabValues:c}=e;const u=[],{blockElementScrollPositionUntilNextRender:p}=(0,s.o5)(),d=e=>{const t=e.currentTarget,n=u.indexOf(t),a=c[n].value;a!==l&&(p(t),i(a))},m=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=u.indexOf(e.currentTarget)+1;t=u[n]??u[0];break}case"ArrowLeft":{const n=u.indexOf(e.currentTarget)-1;t=u[n]??u[u.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},c.map((e=>{let{value:t,label:n,attributes:s}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>u.push(e),onKeyDown:m,onClick:d},s,{className:(0,o.Z)("tabs__item",k,s?.className,{"tabs__item--active":l===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function N(e){const t=f(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",b)},r.createElement(y,(0,a.Z)({},e,t)),r.createElement(v,(0,a.Z)({},e,t)))}function w(e){const t=(0,g.Z)();return r.createElement(N,(0,a.Z)({key:String(t)},e))}},22307:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(87462),r=n(67294);const o="columns_Terr";function s(e){const t=e.style||{};t.gap=e.spacing||20,e.columns?t.gridTemplateColumns=e.columns.map((e=>`${e}`)).join(" "):t.gridTemplateColumns="repeat(2, 1fr)";const n={...e};return delete n.columns,delete n.spacing,delete n.breakAt,r.createElement("div",(0,a.Z)({className:o,"data-break-at":e.breakAt??"md"},n,{style:t}),e.children)}s.isMDXComponent=!0},61667:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(67294),r=n(95999),o=n(24654);function s(e){let{content:t}=e;return a.createElement(o.Z,{summary:a.createElement("summary",null,a.createElement(r.Z,null,"See full code"))},a.createElement("div",null,t))}s.isMDXComponent=!0},18510:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(67294),r=n(44996),o=n(34386),s=n(72412);const l="TooltipContent_Lvru",i="TooltipTitle_ukF2";function c(e){let{url:t,title:n,maxWidth:c,children:u}=e;let p=c||"clamp(250px, 25vw, 800px)";"string"==typeof p&&p.endsWith("vw")&&(p=`clamp(250px, ${p}, 800px)`);const d="function"==typeof n?a.createElement(n):n,m=(t||"").startsWith("/")?(0,r.Z)(t):t,h=t?a.createElement("a",{href:m,target:"_blank",rel:"noreferrer"},u):u;return a.createElement(o.Z,{componentsProps:{tooltip:{style:{maxWidth:p}}},title:a.createElement("span",{className:i},(0,s.Z)(d)),placement:"top",arrow:!0},a.createElement("span",{className:l},h))}c.isMDXComponent=!0},72412:(e,t,n)=>{function a(e){return"object"!=typeof e||Array.isArray(e)||void 0!==e.type?e:e.props.children}n.d(t,{Z:()=>a})},24654:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(87462),r=n(67294),o=n(34673);function s(e){return r.createElement(r.Fragment,null,r.createElement(o.Z,(0,a.Z)({},e,{"data-size":e.size||"normal"})))}}}]);